{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "inmemory://schemas/layout-editor-view-layout.json",
  "title": "LayoutEditorViewLayout",
  "type": "object",
  "additionalProperties": false,
  "required": ["rows", "parentLayoutLegacyMode"],
  "properties": {
    "rows": {
      "type": "array",
      "minItems": 1,
      "items": { "$ref": "#/definitions/LayoutEditorRowItem" }
    },
    "parentLayoutLegacyMode": { "type": "boolean" }
  },
  "definitions": {
    "LayoutEditorItemType": {
      "type": "string",
      "enum": ["row", "view", "nestedLayout", "html"]
    },

    "LayoutEditorViewResizeMethod": {
      "type": "string",
      "enum": [
        "aspectRatio16by9",
        "aspectRatio4by3",
        "aspectRatio1by1",
        "viewLowestElement",
        "viewBodyOffset",
        "viewBodyScroll",
        "viewDocumentElementOffset",
        "viewDocumentElementScroll",
        "viewMax",
        "viewMin",
        "viewGrow",
        "viewTaggedElement",
        "viewLowestElementIEMax",
        "manual"
      ]
    },

    "NodeId": {
      "type": "string",
      "enum": [""]
    },

    "LayoutEditorBaseProps": {
      "type": "object",
      "additionalProperties": false,
      "required": ["nodeID", "type"],
      "properties": {
        "nodeID": { "$ref": "#/definitions/NodeId" },
        "type": { "$ref": "#/definitions/LayoutEditorItemType" },
        "useLegacyMode": { "type": "boolean" },
        "resizeMethod": {
          "$ref": "#/definitions/LayoutEditorViewResizeMethod"
        },
        "resizeInterval": { "type": ["number", "null"] },
        "resizeTolerance": { "type": ["number", "null"] },
        "autoResize": { "type": "boolean" },
        "scrolling": { "type": "boolean" },
        "sizeHeight": { "type": "boolean" },
        "sizeWidth": { "type": "boolean" },
        "maxHeight": { "type": ["number", "null"] },
        "maxWidth": { "type": ["number", "null"] },
        "minHeight": { "type": ["number", "null"] },
        "minWidth": { "type": ["number", "null"] },
        "additionalClasses": {
          "type": "array",
          "items": { "type": "string" }
        },
        "additionalStyles": {
          "type": "array",
          "items": { "type": "string" }
        }
      }
    },

    "LayoutEditorRowItem": {
      "type": "object",
      "additionalProperties": false,
      "required": ["type", "columns"],
      "properties": {
        "type": { "const": "row" },
        "columns": {
          "minItems": 1,
          "type": "array",
          "items": { "$ref": "#/definitions/LayoutEditorColumn" }
        }
      }
    },

    "LayoutEditorViewItem": {
      "allOf": [
        { "$ref": "#/definitions/LayoutEditorBaseProps" },
        {
          "type": "object",
          "properties": { "type": { "const": "view" } },
          "required": ["type"]
        }
      ]
    },

    "LayoutEditorNestedLayoutItem": {
      "type": "object",
      "properties": {
        "type": { "const": "nestedLayout" },
        "nodeID": { "$ref": "#/definitions/NodeId" }
      },
      "required": ["type", "nodeID"]
    },

    "LayoutEditorItem": {
      "oneOf": [
        { "$ref": "#/definitions/LayoutEditorRowItem" },
        { "$ref": "#/definitions/LayoutEditorViewItem" },
        { "$ref": "#/definitions/LayoutEditorNestedLayoutItem" }
      ]
    },

    "LayoutEditorColumn": {
      "type": "object",
      "additionalProperties": false,
      "required": ["content", "widthXS"],
      "properties": {
        "content": {
          "type": "array",
          "items": { "$ref": "#/definitions/LayoutEditorItem" }
        },
        "widthXS": { "type": "number" },
        "widthSM": { "type": "number" },
        "widthMD": { "type": "number" },
        "widthLG": { "type": "number" },
        "widthXL": { "type": "number" }
      }
    }
  }
}
